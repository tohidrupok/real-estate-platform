{% extends 'index.html' %}
{% block body%}
{% load static %} 

<!--==============================
    Breadcumb
============================== -->

    <div class="breadcumb-wrapper" data-bg-src="{% static 'assets/img/bg/breadcrumb-bg.jpg' %}">
        <div class="container">
            <div class="breadcumb-content">
                <h1 class="breadcumb-title">Property Details</h1>
                <ul class="breadcumb-menu">
                    <li><a href="index.html">Home</a></li>
                    <li>Property Details</li>
                </ul>
            </div>
        </div>
    </div>
    <!--==============================
        Blog Area
    ==============================-->
    <section class="property-details space overflow-hidden">
        <div class="container">
            <div class="row gy-40 gx-50">

                <div class="col-xxl-8 col-lg-7">
                    <div class="row gy-30">
                       <div class="slider-area property-slider1">
                        <div class="swiper th-slider panoramaSlide2 mb-4" id="panoramaSlide2" data-slider-options='{"autoplay":false,"effect":"fade","loop":true, "simulateTouch": false,"thumbs":{"swiper":".property-thumb-slider"},"autoplayDisableOnInteraction":"true"}'>
                            <div class="swiper-wrapper">
                                {% for image in property.images.all %}
                                <div class="swiper-slide">
                                    <div class="property-slider-img propery-single-slide" id="panorama{{ forloop.counter }}">
                                        <img src="{{ image.image.url }}" alt="img">
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                            <div class="swiper th-slider property-thumb-slider slider-tab" data-slider-options='{"effect":"slide","loop":true, "simulateTouch": true,"breakpoints":{"0":{"slidesPerView":2},"576":{"slidesPerView":"2"},"768":{"slidesPerView":"3"},"992":{"slidesPerView":"3"},"1200":{"slidesPerView":"4"}},"autoplayDisableOnInteraction":"true"}'>
                                <div class="swiper-wrapper">
                                    {% for image in property.images.all %}
                                    <div class="swiper-slide">
                                        <div class="tab-btn property-slider-img">
                                            <img src="{{ image.image.url }}" alt="img">
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <button data-slider-prev="#panoramaSlide2" class="slider-arrow slider-prev">
                                <i class="far fa-arrow-left"></i>
                            </button>
                            <button data-slider-next="#panoramaSlide2" class="slider-arrow slider-next">
                                <i class="far fa-arrow-right"></i>
                            </button>
                        </div>
                        <div class="property-page-single">
                            <div class="page-content">
                                <div class="property-meta-wrap mb-55 fadeinup wow">
                                    <div class="property-meta">
                                        <a class="property-tag" href="">Featured</a>
                                        <a href=""><i class="fa-solid fa-calendar-days"></i> {{ property.date_posted }} </a>
                                        <a href=""><i class="fa-solid fa-comments"></i> {{ property.name }}</a>
                                    </div>
                                    <div class="wishlist-icon">
                                        <a href="" class="icon-btn"><i class="fa-solid fa-heart"></i></a>
                                    </div>
                                </div>
                                <div class="page-title-wrap fadeinup wow">
                                    <h2 class="page-title mb-2">About This Property</h2>
                                    <h4 class="page-title">{{ property.price }} à§³</h4>
                                </div>
                                <div class="page-features fadeinup wow">
                                    <div class="box-text">
                                            <div class="icon"><img src="{% static 'assets/img/icon/popular-location.svg' %}" alt="icon"></div> {{ property.address }}
                                    </div>
                                    <ul class="property-featured">
                                        <li>
                                            <div class="icon">
                                                <img src="{% static 'assets/img/icon/bed.svg' %}" alt="icon">
                                            </div>
                                            Bed {{ property.room }} 
                                        </li>
                                        <li>
                                            <div class="icon">
                                                <img src="{% static 'assets/img/icon/bath.svg' %}" alt="icon">
                                            </div>
                                            Bath {{ property.bath }} 
                                        </li>
                                        <li>
                                            <div class="icon">
                                                <img src="{% static 'assets/img/icon/sqft.svg' %}" alt="icon">
                                            </div>
                                            {{ property.sqft }} sqft
                                        </li>
                                    </ul>
                                </div>
                                <p class="mb-30 fadeinup wow" style="text-align: justify; text-justify: inter-word;">
                                    {{ property.description_long }}
                                </p>

                                <div class="hightlighes-title-wrap mb-25 fadeinup wow">
                                    <h2 class="page-title mb-2">Property Hightlights</h2>
                                    <h5 class="house-sell"> House for sale/rent </h5>
                                </div>

                                <ul class="property-grid-list fadeinup wow">
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-1.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">ID NO.</h4>
                                            <p class="property-grid-list-text">#{{ property.id_no }}</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-2.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">{{ property.type }}</h4>
                                            <p class="property-grid-list-text">{{ property.purpose }}</p>
                                        </div>
                                    </li>

                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-7.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Purpose</h4>
                                            <p class="property-grid-list-text">{{ property.purpose }}</p>
                                        </div>
                                    </li>
                                    
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-6.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Unit</h4>
                                            <p class="property-grid-list-text">{{ property.unit }}</p>
                                        </div>
                                    </li> 

                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-3.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Room</h4>
                                            <p class="property-grid-list-text">{{ property.room }}</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-4.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Bedroom</h4>
                                            <p class="property-grid-list-text">{{ property.bedroom }}</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-5.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Bath</h4>
                                            <p class="property-grid-list-text">{{ property.bath }}</p>
                                        </div>
                                    </li>
                                    
                                    
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-8.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Sqft</h4>
                                            <p class="property-grid-list-text">{{ property.sqft }}</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-9.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Parking</h4>
                                            <p class="property-grid-list-text">{{ property.parking|yesno:"Yes,No" }}</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-10.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Elevator</h4>
                                            <p class="property-grid-list-text">{{ property.elevator|yesno:"Yes,No" }}</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-11.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Wifi</h4>
                                            <p class="property-grid-list-text">{{ property.wifi|yesno:"Yes,No" }}</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="property-grid-list-icon">
                                            <img src="{% static 'assets/img/icon/property-single-icon1-12.svg' %}" alt="img">
                                        </div>
                                        <div class="property-grid-list-details">
                                            <h4 class="property-grid-list-title">Built in</h4>
                                            <p class="property-grid-list-text">{{ property.built_in }}</p>
                                        </div>
                                    </li>
                                </ul>
                                <h3 class="page-title mt-50 mb-30 fadeinup wow">From Amazing Gallery</h3>
                                <div class="row gy-4 fadeinup wow">
                                    {% for img in property.images.all %}
                                        <div class="col-xl-{{ forloop.counter|divisibleby:"2"|yesno:"7,5" }}">
                                            <div class="property-gallery-card">
                                                <div class="property-gallery-card-img">
                                                    <img class="w-100" src="{{ img.image.url }}" alt="img">
                                                </div>
                                                <a class="icon-btn popup-image" href="{{ img.image.url }}">
                                                    <i class="fa-solid fa-eye"></i>
                                                </a>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                                <h3 class="page-title mt-50 mb-25 fadeinup wow">Features & amenities</h3>

                                {% if selected_features %}
                                    <div class="fea-anim-checklist fadeinup wow">
                                        <div class="checklist style2 list-six-column">
                                            <ul>
                                                {% for feature in selected_features %}
                                                    <li>{{ feature.name }}</li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>
                                {% else %}
                                    <p>No features available for this property.</p>
                                {% endif %}
                                       
                                {% if property.map_embed_url %}
                                    <h3 class="page-title mt-50 mb-30 fadeinup wow">Location</h3>
                                    <div class="location-map fadeinup wow">
                                        <div class="contact-map">
                                            <iframe src="{{ property.map_embed_url }}" allowfullscreen="" loading="lazy"></iframe>
                                        </div>
                                        <div class="location-map-address">
                                            <div class="thumb">
                                                <img src="{{ property.images.first.image.url }}" alt="img">
                                            </div>
                                            <div class="media-body">
                                                <h4 class="title">Address:</h4>
                                                <p class="text">{{ property.address }}</p>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xxl-4 col-lg-5">
                    <aside class="sidebar-area">
                         <div class="widget widget_search  ">
                            <h3 class="widget_title">search</h3>                   
                            <form method="GET" action="{% url 'property-search' %}" class="search-form">
                                <input type="text" name="q" placeholder="What are you looking for?" required>
                                <button type="submit"><i class="fal fa-search"></i></button>
                            </form>
                        </div> 
                        <div class="widget  ">
                            <h3 class="widget_title">Featured Listings</h3>
                            <div class="recent-post-wrap featured-listing">
                                {% for property in featured_properties %}
                                    <div class="recent-post">
                                        <div class="media-img">
                                            <a href="{% url 'property_detail' property.slug %}">
                                                <img src="{{ property.images.first.image.url }}" alt="{{ property.name }}">
                                            </a>
                                        </div>
                                        <div class="media-body">
                                            <h4 class="post-title">
                                                <a class="text-inherit" href="{% url 'property_detail' property.slug %}">
                                                    {{ property.name }}
                                                </a>
                                            </h4>
                                            <div class="property-features-wrap">
                                                <div class="property-features-item">
                                                    <div class="thumb">
                                                        <img src="{% static 'assets/img/icon/bed.svg' %}" alt="Bed">
                                                    </div>
                                                    <h5 class="feature-title">Bed {{ property.bedroom }}</h5>
                                                </div>
                                                <div class="divider"></div>
                                                <div class="property-features-item">
                                                    <div class="thumb">
                                                        <img src="{% static 'assets/img/icon/bath.svg' %}" alt="Bath">
                                                    </div>
                                                    <h5 class="feature-title">Bath {{ property.bath }}</h5>
                                                </div>
                                                <div class="divider"></div>
                                                <div class="property-features-item">
                                                    <div class="thumb">
                                                        <img src="{% static 'assets/img/icon/sqft.svg' %}" alt="Sqft">
                                                    </div>
                                                    <h5 class="feature-title">{{ property.sqft }} sqft</h5>
                                                </div>
                                            </div>
                                            <div class="recent-post-meta">
                                                <a href="{% url 'property_detail' property.slug %}">{{ property.price }} à§³</a>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                                                    
                            </div>
                        </div>
                        <div class="widget sidebar-contact-form">
                            <h3 class="widget_title">Interested To Book?</h3>
                            <div class="contact-form-widget">
                                 {% if messages %}
                                    {% for message in messages %}
                                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                                            {{ message }}
                                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            
                                <form method="post" novalidate>
                                    {% csrf_token %}
                                    {{ form.non_field_errors }}

                                    <div class="mb-3">
                                        {{ form.number.label_tag }}  
                                        {{ form.number }}
                                        {{ form.number.errors }}
                                    </div>
                               
                                    <button type="submit" class="btn btn-primary">Send </button>
                                </form>

                            </div>
                        </div> 
                        <div class="widget widget_whatsapp">
                            <div class="widget-content" style="text-align: center; padding: 15px; border: 1px solid #ddd; border-radius: 8px; max-width: 300px; margin: auto;">
                                <h3 style="margin-bottom: 8px; color: #25D366; font-size: 18px;">
                                    Contact via WhatsApp
                                </h3>
                                <p style="margin-bottom: 12px; font-size: 14px; color: #555;">
                                    Click below to message us about this property.
                                </p>
                                <a href="https://wa.me/8801913222203?text=Hello%20BTP,%20I%20am%20interested%20in%20one%20of%20your%20properties.%0A%0AProperty%20Details:%0A{{ request.build_absolute_uri }}%0A%0APlease%20let%20me%20know%20more%20information."
                                target="_blank"
                                style="display: inline-block; background-color: #25D366; color: white; padding: 8px 16px; border-radius: 5px; text-decoration: none; font-size: 14px; font-weight: 500;">
                                Send on WhatsApp
                                </a>
                            </div>
                        </div>



                    </aside>
                </div>

            </div>
        </div>
    </section>
    
{% endblock %}
